<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threatened by AI</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div class="logo">
        <h1>THREATENED BY AI</h1>
        <p>Face the Oracle's evolving challenges. Survive. Outsmart. Conquer.</p>
    </div>

    <!-- Home Screen -->
    <div class="page active" id="home-screen">
        <div class="page-content">
            <div class="action-section">
                <input type="text" id="player-name" placeholder="Enter your name" maxlength="15">
                <button class="btn primary large" id="create-room-btn">Create Room</button>
                <div class="join-section">
                    <input type="text" id="room-code" placeholder="Room Code" maxlength="6">
                    <button class="btn secondary" id="join-room-btn">Join</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Lobby Screen -->
    <div class="page" id="lobby-screen">
        <div class="page-content">
            <div class="lobby-header">
                <h2>Lobby</h2>
                <div class="room-info" id="room-code-display">Room: LOADING</div>
                <div class="players-section">
                    <h3>Players</h3>
                    <div id="players-list"></div>
                </div>
                <div class="waiting-text">Waiting for players...</div>
                <button class="btn primary large hidden" id="start-game-btn">Start Game</button>
            </div>
        </div>
    </div>

    <!-- Oracle Introduction -->
    <div class="page" id="oracle-intro-screen">
        <div class="page-content">
            <div class="oracle-avatar large">ü§ñ</div>
            <div class="oracle-message" id="oracle-intro-message">
                I AM THE ORACLE! Prepare for intellectual warfare!
            </div>
        </div>
    </div>

    <!-- Riddle Screen -->
    <div class="page" id="riddle-screen">
        <div class="page-content">
            <div class="timer-section">
                <div class="timer" id="riddle-timer">45</div>
                <p>seconds to answer</p>
            </div>
            <div id="round-display">Round 1/5</div>
            <div class="riddle-question" id="riddle-text">Loading riddle...</div>
            <div class="answer-section">
                <input type="text" id="riddle-answer" placeholder="Your answer">
                <button class="btn primary" id="submit-riddle">Submit Answer</button>
                <div class="submission-status">
                    <p id="submission-count">0/0 players answered</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Riddle Results -->
    <div class="page" id="riddle-results-screen">
        <div class="page-content">
            <div class="results-header">
                <h2>Riddle Results</h2>
                <div class="oracle-message" id="riddle-results-message">Calculating results...</div>
            </div>
            <div class="all-answers-section">
                <div id="all-answers-list"></div>
            </div>
        </div>
    </div>

    <!-- Text Challenge Screen -->
    <div class="page" id="text-challenge-screen">
        <div class="page-content">
            <div class="timer-section">
                <div class="timer" id="text-challenge-timer">40</div>
                <p>seconds to respond</p>
            </div>
            <h2 id="text-challenge-title">AI CHALLENGE</h2>
            <div class="challenge-description" id="text-challenge-content">
                Loading challenge...
            </div>
            <div class="response-section">
                <textarea class="response-textarea" id="challenge-response" 
                          placeholder="Think carefully and provide a detailed response..."></textarea>
                <button class="btn primary" id="submit-challenge-response">Submit Response</button>
                <div class="submission-status">
                    <p id="text-challenge-submission-count">0/3 players responded</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Fast Tapper Screen -->
    <div class="page" id="fast-tapper-screen">
        <div class="page-content">
            <div class="timer-section">
                <div class="timer" id="fast-tapper-timer">10</div>
                <p>seconds remaining</p>
            </div>
            <h2>Fast Tapper Challenge</h2>
            <div class="tapper-section">
                <p>Tap the button as fast as you can!</p>
                <div class="tap-counter">
                    <div class="tap-count-display" id="tap-count">0</div>
                    <p>taps</p>
                </div>
                <button class="btn primary tap-btn" id="tap-button">TAP!</button>
            </div>
        </div>
    </div>

    <!-- Challenge Results -->
    <div class="page" id="challenge-results-screen">
        <div class="page-content">
            <div class="results-header">
                <h2 id="challenge-results-title">Challenge Results</h2>
                <div class="oracle-message" id="challenge-results-message">Processing results...</div>
            </div>
            <div id="challenge-results-content"></div>
        </div>
    </div>

    <!-- Waiting Screen -->
    <div class="page" id="waiting-screen">
        <div class="page-content">
            <div class="waiting-section">
                <div class="oracle-avatar">ü§ñ</div>
                <h2 id="waiting-title">Others are completing their challenges...</h2>
                <div class="waiting-text" id="waiting-message">Please wait...</div>
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- FIXED: Round Summary Screen with Points Table -->
    <div class="page" id="round-summary-screen">
        <div class="page-content">
            <div class="round-summary-section">
                <h2 id="round-summary-title">Round Complete!</h2>
                <div class="points-table-container">
                    <h3>Leaderboard</h3>
                    <div id="points-table"></div>
                </div>
                <div class="waiting-text" id="next-round-text">Next round starting soon...</div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div class="page" id="game-over-screen">
        <div class="page-content">
            <div class="game-over-section">
                <div class="oracle-avatar large" id="final-oracle">ü§ñ</div>
                <div class="oracle-message" id="final-oracle-message">"The Oracle has chosen!"</div>
                
                <div class="big-winner-announcement" id="big-winner-announcement">
                    üèÜ CHAMPION: Player üèÜ
                </div>
                
                <div class="final-points-table-container">
                    <h3>Final Leaderboard</h3>
                    <div id="final-points-table"></div>
                </div>
                
                <div class="all-answers-section">
                    <h3>Final Scores</h3>
                    <div id="final-scores"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Individual Result Overlay -->
    <div class="result-overlay" id="result-overlay">
        <div class="result-overlay-content">
            <div id="individual-result-content"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
